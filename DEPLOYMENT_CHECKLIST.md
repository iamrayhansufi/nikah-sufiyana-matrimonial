# Nikah Sufiyana Domain Migration Checklist

This document provides a step-by-step checklist for completing the migration from the Vercel preview domain to the primary domain (https://www.nikahsufiyana.com).

## 1. Credential Rotation

- [ ] Run the credential rotation script:
  ```bash
  node scripts/rotate-credentials.js
  ```
  
- [ ] Save all new credentials securely (do NOT commit them to Git)
- [ ] Update database password in Neon DB:
  - Log in to the [Neon Dashboard](https://console.neon.tech/)
  - Navigate to project settings
  - Change the database user password to the new one generated by the rotation script
  
- [ ] Update SMTP password in email provider:
  - Log in to Hostinger or your email provider
  - Change the SMTP password for rishta@nikahsufiyana.com
  
- [ ] Update local `.env` file with new credentials
  - Replace all password/secret instances in `.env` with new values
  - Do NOT commit the updated `.env` file

## 2. Vercel Deployment

- [ ] Update environment variables in Vercel:
  - Log in to [Vercel Dashboard](https://vercel.com)
  - Go to the nikah-sufiyana-matrimonial project
  - Navigate to Settings > Environment Variables
  - Update all credentials including:
    - JWT_SECRET
    - NEXTAUTH_SECRET
    - DATABASE_URL and all DB connection strings (update the password portion)
    - SMTP_PASS
    - Any other credentials generated by the rotation script

- [ ] Deploy to Vercel:
  ```bash
  npm run deploy
  ```
  
- [ ] Monitor deployment for errors
- [ ] Verify build completes successfully

## 3. Post-Deployment Verification

- [ ] Verify the website loads properly at https://www.nikahsufiyana.com
- [ ] Test user registration and login
- [ ] Test email verification flow
- [ ] Test profile creation and editing
- [ ] Verify database connections are working
- [ ] Test messaging functionality
- [ ] Verify premium features and payments (if applicable)
- [ ] Test admin login and functionality

## 4. Security Checks

- [ ] Verify `.env` is in `.gitignore`
- [ ] Confirm no credentials are hardcoded in the codebase
- [ ] Run a final security check:
  ```bash
  npm run security:check
  ```
- [ ] Verify all environment variables are set correctly

## 5. DNS and Domain Configuration

- [ ] Verify DNS records are correctly pointing to Vercel
- [ ] Check SSL certificate is valid and working
- [ ] Ensure proper redirects are in place (www to non-www or vice versa)

## 6. Cleanup

- [ ] Remove any test files that contain sensitive information
- [ ] Update documentation with new domain information
- [ ] Archive or delete any old/unused preview deployments

## 7. Ongoing Monitoring

- [ ] Set up monitoring for the site (e.g., Vercel Analytics, Google Analytics)
- [ ] Consider setting up alerts for any future credentials exposure
- [ ] Document regular security review process

## Contact

If you encounter any issues during this process, please contact:
- Technical Support: [Your contact info]
